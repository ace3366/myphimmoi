{"ast":null,"code":"import{useState,useEffect}from\"react\";export function useHttpAll(movieRequest){const[movieData,setMovieData]=useState({});const[isLoading,setIsLoading]=useState(true);useEffect(()=>{async function sendRequest(){console.log(\"fetching\");setIsLoading(true);try{// Lấy 1 lượt tất cả thể loại phim vào 1 array\nconst request=movieRequest.map(movie=>fetch(\"https://api.themoviedb.org/3\".concat(movie[1],\" \")));const responses=await Promise.all(request);const resData=await Promise.all(responses.map(response=>response.json()));// Lưu vào resData để đưa ra\nsetMovieData(resData);if(!request.ok){throw new Error(\"Failed to fetch movie\");}}catch(err){console.error(err);}setIsLoading(false);}sendRequest();},[]);// Gọi hàm chạy ở lần render đầu tiên\nreturn{movieData,isLoading};}","map":{"version":3,"names":["useState","useEffect","useHttpAll","movieRequest","movieData","setMovieData","isLoading","setIsLoading","sendRequest","console","log","request","map","movie","fetch","concat","responses","Promise","all","resData","response","json","ok","Error","err","error"],"sources":["D:/WORK/Submit/RJS301x_1.0-A_VN/Assignment 02 (Starter Code)/src/pages/hooks/useHttpAll.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nexport function useHttpAll(movieRequest) {\r\n  const [movieData, setMovieData] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function sendRequest() {\r\n      console.log(\"fetching\");\r\n      setIsLoading(true);\r\n      try {\r\n        // Lấy 1 lượt tất cả thể loại phim vào 1 array\r\n        const request = movieRequest.map((movie) =>\r\n          fetch(`https://api.themoviedb.org/3${movie[1]} `)\r\n        );\r\n        const responses = await Promise.all(request);\r\n        const resData = await Promise.all(\r\n          responses.map((response) => response.json())\r\n        );\r\n        // Lưu vào resData để đưa ra\r\n        setMovieData(resData);\r\n        if (!request.ok) {\r\n          throw new Error(\"Failed to fetch movie\");\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n      setIsLoading(false);\r\n    }\r\n    sendRequest();\r\n  }, []);\r\n\r\n  // Gọi hàm chạy ở lần render đầu tiên\r\n\r\n  return {\r\n    movieData,\r\n    isLoading,\r\n  };\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,SAAS,CAAAC,UAAUA,CAACC,YAAY,CAAE,CACvC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC9C,KAAM,CAACM,SAAS,CAAEC,YAAY,CAAC,CAAGP,QAAQ,CAAC,IAAI,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd,cAAe,CAAAO,WAAWA,CAAA,CAAG,CAC3BC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,CACvBH,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF;AACA,KAAM,CAAAI,OAAO,CAAGR,YAAY,CAACS,GAAG,CAAEC,KAAK,EACrCC,KAAK,gCAAAC,MAAA,CAAgCF,KAAK,CAAC,CAAC,CAAC,KAAG,CAClD,CAAC,CACD,KAAM,CAAAG,SAAS,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAACP,OAAO,CAAC,CAC5C,KAAM,CAAAQ,OAAO,CAAG,KAAM,CAAAF,OAAO,CAACC,GAAG,CAC/BF,SAAS,CAACJ,GAAG,CAAEQ,QAAQ,EAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAC7C,CAAC,CACD;AACAhB,YAAY,CAACc,OAAO,CAAC,CACrB,GAAI,CAACR,OAAO,CAACW,EAAE,CAAE,CACf,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACF,CAAE,MAAOC,GAAG,CAAE,CACZf,OAAO,CAACgB,KAAK,CAACD,GAAG,CAAC,CACpB,CACAjB,YAAY,CAAC,KAAK,CAAC,CACrB,CACAC,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AAEA,MAAO,CACLJ,SAAS,CACTE,SACF,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module"}